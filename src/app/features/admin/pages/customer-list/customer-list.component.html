<div class="admin-page">
  <header-list title="Customer Management"></header-list>
  
  <div class="page-actions">
    <app-button 
      label="+ Add Customer" 
      [fullWidth]="false" 
      variant="primary"
      (onClick)="openAddCustomerDialog()">
    </app-button>
  </div>

  @if (error()) {
    <div class="error-banner">
      <p>{{ error() }}</p>
      <button class="btn btn-secondary" (click)="refreshList()">Retry</button>
    </div>
  }

  <generic-list 
    [data]="displayData()" 
    [headers]="headers"
    [loading]="loading()"
    (rowSelect)="onRowSelect($event)"></generic-list>

  <pagination-controls 
    [totalCount]="totalCount()" 
    [pageSize]="pageSize()" 
    [currentPage]="currentPage()" 
    [totalItems]="totalCount()"  
    [loading]="loading()" 
    (pageSizeChanged)="onPageSizeChange($event)"
    (nextPage)="onNextPage()"
    (previousPage)="onPreviousPage()"
    (pageChanged)="onPageChange($event)"></pagination-controls>

  <app-dialog 
    [isOpen]="isDialogOpen()" 
    [title]="'Add New Customer'"
    (onClose)="closeDialog()">
    <app-add-customer-form 
      (onSuccess)="onCustomerCreated()"
      (onCancel)="closeDialog()">
    </app-add-customer-form>
  </app-dialog>
</div>

